// Copyright (c) 2015-present Mattermost, Inc. All Rights Reserved.
// See LICENSE.txt for license information.

// Code generated by `make client`. DO NOT EDIT.

package client

import (
	"net/rpc"

	"github.com/mattermost/mattermost-server/v5/model"
)

type {{.Name}} struct {
   client *rpc.Client
}

func NewClient(addr string) (*{{.Name}}, error) {
	client, err := rpc.Dial("unix", addr)
	if err != nil {
		return nil, err
	}

	return &{{.Name}}{
		client: client,
	}, nil
}

{{range .Methods}}
func ({{.Abbrv}} *{{.Struct}}) {{.Name}}({{range .Arguments}}{{.Name}} {{.Type}},{{end}}) ({{range .ReturnValues}}{{if .Pointer}} *{{end}}{{.Type}},{{end}} error) {
	var out {{if .OutputStruct.Pointer}}*{{end}}{{.OutputStruct.Type}}
	err := {{.Abbrv}}.client.Call("{{.RemoteStructName}}.{{.RemoteMethodName}}", {{range .Arguments}}{{.Name}}, {{end}} &out)
	if err != nil {
		return nil, err
	}
	return {{range .ReturnValues}}out.{{.Name}},{{end}} nil
}{{end}}